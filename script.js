const suits = ["P", "W", "C", "S"]; // P=Pentacles, W=Wands, C=Cups, S=Swords
const minorCards = ["0A", "02", "03", "04", "05", "06", "07", "08", "09", "10", "J1", "J2", "QU", "KI"];
const cardsGrid = document.getElementById("cards-grid");

const modal = document.getElementById("modal");
const selectedCardsDiv = document.getElementById("selected-cards");
const predictBtn = document.getElementById("predict-btn");
const newDrawBtn = document.getElementById("new-draw-btn");

let selectedCards = [];
let selectionComplete = false;
let cardDivs = [];

const allCards = [];

// üß© ‡∏Å‡∏≥‡∏´‡∏ô‡∏î path ‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏£‡∏π‡∏õ (‡πÅ‡∏Å‡πâ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏à‡∏∏‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡πá‡∏û‡∏≠)
const imageBasePath = "images-webp";
const imageExt = "webp"; // ‡πÉ‡∏ä‡πâ .webp ‡πÅ‡∏ó‡∏ô .png

// ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ Major Arcana
const majorMeanings = [
  "The Fool: ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà, ‡∏Å‡∏≤‡∏£‡∏ú‡∏à‡∏ç‡∏†‡∏±‡∏¢‡πÑ‡∏£‡πâ‡∏Å‡∏±‡∏á‡∏ß‡∏•, ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏ô‡∏™‡∏±‡∏ç‡∏ä‡∏≤‡∏ï‡∏ç‡∏≤‡∏ì",
  "The Magician: ‡∏û‡∏•‡∏±‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå, ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡∏Å‡∏©‡∏∞‡∏ó‡∏µ‡πà‡∏°‡∏µ, ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ù‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏£‡∏¥‡∏á, ‡∏£‡∏¥‡πÄ‡∏£‡∏¥‡πà‡∏°",
  "The High Priestess: ‡∏ç‡∏≤‡∏ì‡∏´‡∏¢‡∏±‡πà‡∏á‡∏£‡∏π‡πâ, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∂‡∏Å‡∏•‡∏±‡∏ö, ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏±‡∏ç‡∏ä‡∏≤‡∏ï‡∏ç‡∏≤‡∏ì, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô",
  "The Empress: ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏∏‡∏î‡∏°‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå, ‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏á‡∏≠‡∏Å‡∏á‡∏≤‡∏°, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå",
  "The Emperor: ‡∏≠‡∏≥‡∏ô‡∏≤‡∏à, ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á, ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏ô‡∏≥, ‡∏Å‡∏é‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö",
  "The Hierophant: ‡∏Ñ‡∏≥‡∏™‡∏≠‡∏ô, ‡∏Ç‡∏ô‡∏ö‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏°, ‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏ß‡∏á‡∏´‡∏≤‡∏Ñ‡∏≥‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡∏£‡∏π‡πâ",
  "The Lovers: ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå, ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï",
  "The Chariot: ‡∏ä‡∏±‡∏¢‡∏ä‡∏ô‡∏∞, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏∏‡πà‡∏á‡∏°‡∏±‡πà‡∏ô, ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå, ‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",
  "Strength: ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏Å‡∏£‡πà‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ô, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏•‡πâ‡∏≤‡∏´‡∏≤‡∏ç, ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏°‡∏ï‡∏ï‡∏≤, ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå",
  "The Hermit: ‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏µ‡∏Å‡∏ß‡∏¥‡πÄ‡∏ß‡∏Å, ‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á, ‡∏Å‡∏≤‡∏£‡πÉ‡∏Ñ‡∏£‡πà‡∏Ñ‡∏£‡∏ß‡∏ç, ‡πÅ‡∏™‡∏ß‡∏á‡∏´‡∏≤‡∏™‡∏±‡∏à‡∏ò‡∏£‡∏£‡∏°",
  "Wheel of Fortune: ‡πÇ‡∏ä‡∏Ñ‡∏ä‡∏∞‡∏ï‡∏≤, ‡∏ß‡∏á‡∏à‡∏£‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï, ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÉ‡∏´‡∏ç‡πà, ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÑ‡∏°‡πà‡∏Ñ‡∏≤‡∏î‡∏ù‡∏±‡∏ô",
  "Justice: ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏∏‡∏ï‡∏¥‡∏ò‡∏£‡∏£‡∏°, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡∏î‡∏∏‡∏•, ‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢, ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏á‡∏ï‡∏£‡∏á",
  "The Hanged Man: ‡∏Å‡∏≤‡∏£‡∏´‡∏¢‡∏∏‡∏î‡∏ô‡∏¥‡πà‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô, ‡∏Å‡∏≤‡∏£‡∏°‡∏≠‡∏á‡πÇ‡∏•‡∏Å‡∏°‡∏∏‡∏°‡∏Å‡∏•‡∏±‡∏ö, ‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏ß‡∏≤‡∏á",
  "Death: ‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏ö‡∏≤‡∏á‡∏™‡∏¥‡πà‡∏á, ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ, ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏ö‡∏™‡∏¥‡πâ‡∏ô",
  "Temperance: ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡∏î‡∏∏‡∏•, ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ô‡∏µ‡∏õ‡∏£‡∏∞‡∏ô‡∏≠‡∏°, ‡∏Å‡∏≤‡∏£‡∏ú‡∏™‡∏°‡∏ú‡∏™‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏ï‡∏±‡∏ß, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏≠‡∏î‡∏µ",
  "The Devil: ‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡∏Å‡∏°‡∏±‡∏î, ‡∏Å‡∏≤‡∏£‡∏¢‡∏∂‡∏î‡∏ï‡∏¥‡∏î, ‡∏Å‡∏¥‡πÄ‡∏•‡∏™, ‡∏Å‡∏≤‡∏£‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏£‡∏≠‡∏ö‡∏á‡∏≥‡∏î‡πâ‡∏ß‡∏¢‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏î‡∏µ",
  "The Tower: ‡∏Å‡∏≤‡∏£‡∏•‡πà‡∏°‡∏™‡∏•‡∏≤‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏â‡∏±‡∏ö‡∏û‡∏•‡∏±‡∏ô, ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á, ‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏î‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏∏‡∏Å‡∏Ç‡πå",
  "The Star: ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏±‡∏á, ‡∏Å‡∏≤‡∏£‡πÄ‡∏¢‡∏µ‡∏¢‡∏ß‡∏¢‡∏≤‡∏à‡∏¥‡∏ï‡πÉ‡∏à, ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏á‡∏≤‡∏°, ‡∏Å‡∏≤‡∏£‡∏ü‡∏∑‡πâ‡∏ô‡∏ü‡∏π‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï",
  "The Moon: ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏ö‡∏™‡∏ô, ‡∏†‡∏≤‡∏û‡∏•‡∏ß‡∏á‡∏ï‡∏≤, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏•‡∏±‡∏ß‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•",
  "The Sun: ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à, ‡∏ä‡∏±‡∏¢‡∏ä‡∏ô‡∏∞, ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏ö‡∏ß‡∏Å, ‡∏Å‡∏≤‡∏£‡∏°‡∏≠‡∏á‡πÇ‡∏•‡∏Å‡πÉ‡∏ô‡πÅ‡∏á‡πà‡∏î‡∏µ",
  "Judgement: ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢, ‡∏Å‡∏≤‡∏£‡∏ï‡∏∑‡πà‡∏ô‡∏£‡∏π‡πâ, ‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥",
  "The World: ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå, ‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏£‡∏•‡∏∏‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î, ‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏è‡∏à‡∏±‡∏Å‡∏£"
];

// ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ Minor Arcana
const minorMeanings = {
  "0A": "‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç, ‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà, ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô/‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå/‡πÄ‡∏á‡∏¥‡∏ô ‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡πá‡∏°‡πÄ‡∏õ‡∏µ‡πà‡∏¢‡∏°",
  "02": "‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£, ‡∏Å‡∏≤‡∏£‡∏ä‡∏±‡πà‡∏á‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å/‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≠‡∏á‡∏ó‡∏≤‡∏á, ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏±‡∏ô‡∏ò‡∏°‡∏¥‡∏ï‡∏£",
  "03": "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏´‡∏•‡∏±‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°, ‡∏Å‡∏≤‡∏£‡∏£‡πà‡∏ß‡∏°‡∏°‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏ú‡∏•‡∏î‡∏µ, ‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï, ‡∏Å‡∏≤‡∏£‡πÄ‡∏â‡∏•‡∏¥‡∏°‡∏â‡∏•‡∏≠‡∏á",
  "04": "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á, ‡∏Å‡∏≤‡∏£‡∏´‡∏¢‡∏∏‡∏î‡∏ô‡∏¥‡πà‡∏á, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢, ‡∏Å‡∏≤‡∏£‡∏¢‡∏∂‡∏î‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ö‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏°‡∏µ",
  "05": "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏±‡∏î‡πÅ‡∏¢‡πâ‡∏á/‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢, ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏≠‡πÉ‡∏à",
  "06": "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à/‡∏ä‡∏±‡∏¢‡∏ä‡∏ô‡∏∞‡πÄ‡∏•‡πá‡∏Å‡πÜ, ‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏î‡∏∏‡∏•, ‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô/‡πÑ‡∏õ‡∏™‡∏π‡πà‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤",
  "07": "‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏™‡∏π‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á/‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î, ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏°‡πà‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à, ‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡πâ‡∏≠‡∏ù‡∏±‡∏ô/‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô",
  "08": "‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß/‡∏Å‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß, ‡∏Å‡∏≤‡∏£‡∏ñ‡∏π‡∏Å‡∏à‡∏≥‡∏Å‡∏±‡∏î/‡∏Å‡∏±‡∏Å‡∏Ç‡∏±‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡∏Ç‡∏≠‡∏á‡∏ï‡∏ô‡πÄ‡∏≠‡∏á",
  "09": "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à/‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏∂‡∏á‡∏û‡∏≠‡πÉ‡∏à‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡∏ó‡∏≤‡∏á‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏±‡∏á‡∏ß‡∏•/‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ñ‡∏£‡∏µ‡∏¢‡∏î",
  "10": "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå, ‡∏†‡∏≤‡∏£‡∏∞‡∏´‡∏ô‡∏±‡∏Å‡∏≠‡∏∂‡πâ‡∏á/‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡πÄ‡∏Å‡∏¥‡∏ô‡∏ï‡∏±‡∏ß, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡πÉ‡∏ô‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß",
  "J1": "‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà, ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏£‡∏∞‡∏ï‡∏∑‡∏≠‡∏£‡∏∑‡∏≠‡∏£‡πâ‡∏ô, ‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á‡∏™‡∏≤‡∏£",
  "J2": "‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥/‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡∏ó‡∏µ‡πà‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß, ‡∏Å‡∏≤‡∏£‡πÄ‡∏ú‡∏ä‡∏¥‡∏ç‡∏´‡∏ô‡πâ‡∏≤, ‡∏Å‡∏≤‡∏£‡∏°‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠",
  "QU": "‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏™‡∏±‡∏ç‡∏ä‡∏≤‡∏ï‡∏ç‡∏≤‡∏ì/‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•/‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á, ‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå",
  "KI": "‡∏ú‡∏π‡πâ‡∏ô‡∏≥‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à, ‡∏°‡∏µ‡∏≠‡∏≥‡∏ô‡∏≤‡∏à/‡∏ß‡∏∏‡∏í‡∏¥‡∏†‡∏≤‡∏ß‡∏∞, ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ó‡∏µ‡πà‡∏î‡∏µ"
};

const suitNames = {
  "P": "‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç (Pentacles)",
  "W": "‡πÑ‡∏°‡πâ‡πÄ‡∏ó‡πâ‡∏≤ (Wands)",
  "C": "‡∏ñ‡πâ‡∏ß‡∏¢ (Cups)",
  "S": "‡∏î‡∏≤‡∏ö (Swords)"
};

const cardNumbers = {
  "0A": "‡πÄ‡∏≠‡∏ã", "02": "‡∏™‡∏≠‡∏á", "03": "‡∏™‡∏≤‡∏°", "04": "‡∏™‡∏µ‡πà", "05": "‡∏´‡πâ‡∏≤",
  "06": "‡∏´‡∏Å", "07": "‡πÄ‡∏à‡πá‡∏î", "08": "‡πÅ‡∏õ‡∏î", "09": "‡πÄ‡∏Å‡πâ‡∏≤", "10": "‡∏™‡∏¥‡∏ö",
  "J1": "‡πÄ‡∏û‡∏à", "J2": "‡∏≠‡∏±‡∏®‡∏ß‡∏¥‡∏ô", "QU": "‡∏£‡∏≤‡∏ä‡∏¥‡∏ô‡∏µ", "KI": "‡∏£‡∏≤‡∏ä‡∏≤"
};

// üÉè ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏û‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
for (let i = 0; i < 22; i++) {
  const num = i.toString().padStart(2, "0");
  const [title, meaning] = majorMeanings[i].split(': ');
  allCards.push({
    type: "major",
    title: title,
    src: `${imageBasePath}/major_arcana_${num}.${imageExt}`,
    meaning: meaning.trim()
  });
}

for (const suit of suits) {
  for (const card of minorCards) {
    const cardTitle = `${cardNumbers[card]} ${suitNames[suit]}`;
    const cardMeaning = minorMeanings[card];
    allCards.push({
      type: "minor",
      title: cardTitle,
      src: `${imageBasePath}/minor_arcana_${suit}_${card}.${imageExt}`,
      meaning: cardMeaning.trim()
    });
  }
}

// üÇ† ‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏û‡πà (webp)
const backSrc = `${imageBasePath}/back.${imageExt}`;

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏∏‡πà‡∏°
function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

shuffle(allCards);

// ‡∏™‡∏£‡πâ‡∏≤‡∏á grid ‡πÑ‡∏û‡πà
allCards.forEach(card => {
  const cardDiv = document.createElement("div");
  cardDiv.classList.add("card");
  cardDivs.push(cardDiv);

  const img = document.createElement("img");
  img.src = backSrc;
  cardDiv.appendChild(img);

  cardDiv.addEventListener("click", () => {
    if (selectionComplete) return;
    if (cardDiv.classList.contains("selected")) return;

    cardDiv.classList.add("selected");
    selectedCards.push(card);

    if (selectedCards.length === 7) {
      selectionComplete = true;
      modal.style.display = "block";
    }
  });

  cardsGrid.appendChild(cardDiv);
});

// ‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢
predictBtn.addEventListener("click", () => {
  selectedCardsDiv.innerHTML = "";
  selectedCards.forEach(card => {
    const div = document.createElement("div");
    div.style.marginBottom = "15px";

    const img = document.createElement("img");
    img.src = card.src;

    const titleElement = document.createElement("p");
    titleElement.innerHTML = `<strong>${card.title}</strong>`;
    titleElement.style.margin = "5px 0 2px 0";
    titleElement.style.fontSize = "1em";

    const meaningElement = document.createElement("p");
    meaningElement.textContent = card.meaning;
    meaningElement.style.margin = "0";
    meaningElement.style.fontSize = "0.9em";

    div.appendChild(img);
    div.appendChild(titleElement);
    div.appendChild(meaningElement);
    selectedCardsDiv.appendChild(div);
  });
  predictBtn.style.display = "none";
  newDrawBtn.style.display = "inline-block";
});

// ‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà
newDrawBtn.addEventListener("click", () => {
  selectedCards = [];
  selectionComplete = false;
  modal.style.display = "none";
  newDrawBtn.style.display = "none";
  predictBtn.style.display = "inline-block";
  cardDivs.forEach(div => div.classList.remove("selected"));
});
